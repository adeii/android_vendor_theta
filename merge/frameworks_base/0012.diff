From: ChepKun <ProgrammerKun@gmail.com>
Subject: frameworks/base (0012): add option to display navbar

diff --git a/core/java/android/provider/Settings.java b/core/java/android/provider/Settings.java
index 72ef076..aa9b904 100644
--- a/core/java/android/provider/Settings.java
+++ b/core/java/android/provider/Settings.java
@@ -3285,6 +3285,12 @@ public final class Settings {
          */
         public static final String UI_FORCE_OVERFLOW_BUTTON = "ui_force_overflow_button";
 
+        /**
+         * Option to display navigation bar
+         * @hide
+         */
+        public static final String SHOW_NAVBAR = "show_navbar";
+
          /**
           * Volume keys control cursor in text fields (default is 0)
           * 0 - Disabled
@@ -3292,7 +3298,7 @@ public final class Settings {
           * 2 - Volume up/down moves cursor right/left
           * @hide
           */
-         public static final String VOLUME_KEY_CURSOR_CONTROL = "volume_key_cursor_control";
+        public static final String VOLUME_KEY_CURSOR_CONTROL = "volume_key_cursor_control";
 
         /**
          * toggle to "fix" the following: (found in NotificationManagerService)
diff --git a/policy/src/com/android/internal/policy/impl/PhoneWindowManager.java b/policy/src/com/android/internal/policy/impl/PhoneWindowManager.java
index 6c29a62..3180175 100644
--- a/policy/src/com/android/internal/policy/impl/PhoneWindowManager.java
+++ b/policy/src/com/android/internal/policy/impl/PhoneWindowManager.java
@@ -1358,8 +1358,13 @@ public class PhoneWindowManager implements WindowManagerPolicy {
         }
 
         if (!mHasSystemNavBar) {
-            mHasNavigationBar = mContext.getResources().getBoolean(
-                    com.android.internal.R.bool.config_showNavigationBar);
+            if (mContext.getResources().getBoolean(
+                    com.android.internal.R.bool.config_showNavigationBar)) {
+                    mHasNavigationBar = true;
+            } else {
+            	mHasNavigationBar = (Settings.System.getInt(mContext.getContentResolver(),
+                    Settings.System.SHOW_NAVBAR, 0) == 1);
+            }
             // Allow a system property to override this. Used by the emulator.
             // See also hasNavigationBar().
             String navBarOverride = SystemProperties.get("qemu.hw.mainkeys");
