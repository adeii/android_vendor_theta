From: Konsta <konsta09@gmail.com>
Subject: packages/Settings (0004): don't hide navbar and pie settings

diff --git a/res/values-ru/cm_strings.xml b/res/values-ru/cm_strings.xml
index 60dbb75..4af6780 100644
--- a/res/values-ru/cm_strings.xml
+++ b/res/values-ru/cm_strings.xml
@@ -783,7 +783,7 @@
 
     <!-- Quick/Pie Control #CM -->
     <string name="pie_control_title">Панель навигации</string>
-    <string name="pie_control_enabled">Включается при активации «Расширенного экрана»</string>
+    <string name="pie_control_enabled">Включено</string>
     <string name="pie_control_disabled">Выключено</string>
     <string name="pie_control_sensitivity_title">Чувствительность</string>
     <string name="pie_control_sensitivity_low">Низкая</string>
diff --git a/res/values/cm_strings.xml b/res/values/cm_strings.xml
index b3161e0..78849d6 100644
--- a/res/values/cm_strings.xml
+++ b/res/values/cm_strings.xml
@@ -861,7 +861,7 @@ two in order to insert additional control points. \'Remove\' deletes the selecte
 
     <!-- Pie controls -->
     <string name="pie_control_title">Pie controls</string>
-    <string name="pie_control_enabled">Floating controls when Expanded desktop is enabled</string>
+    <string name="pie_control_enabled">Floating controls enabled</string>
     <string name="pie_control_disabled">Floating controls disabled</string>
     <string name="pie_control_sensitivity_title">Responsiveness</string>
     <string name="pie_control_sensitivity_low">Low</string>
diff --git a/res/xml/system_ui_settings.xml b/res/xml/system_ui_settings.xml
index 45a3614..b91765a 100644
--- a/res/xml/system_ui_settings.xml
+++ b/res/xml/system_ui_settings.xml
@@ -46,15 +46,20 @@
         android:title="@string/power_menu_expanded_desktop"
         android:persistent="false" />
 
+    <PreferenceScreen
+        android:key="pie_control"
+        android:fragment="com.android.settings.cyanogenmod.PieControl"
+        android:title="@string/pie_control_title" />
+
+    <PreferenceScreen
+        android:key="navigation_bar"
+        android:fragment="com.android.settings.cyanogenmod.NavBar"
+        android:title="@string/navigation_bar_title" />
+
     <PreferenceCategory
         android:key="navigation_bar"
         android:title="@string/navigation_bar_category" >
 
-        <PreferenceScreen
-            android:key="navigation_bar"
-            android:fragment="com.android.settings.cyanogenmod.NavBar"
-            android:title="@string/navigation_bar_title" />
-
         <ListPreference
             android:key="nav_buttons_height"
             android:dialogTitle="@string/navigation_bar_height"
@@ -69,11 +74,6 @@
             android:fragment="com.android.settings.cyanogenmod.NavRing"
             android:title="@string/navigation_ring_title" />
 
-        <PreferenceScreen
-            android:key="pie_control"
-            android:fragment="com.android.settings.cyanogenmod.PieControl"
-            android:title="@string/pie_control_title" />
-
     </PreferenceCategory>
 
     <!-- Device Specific Touchscreen gestures -->
diff --git a/src/com/android/settings/cyanogenmod/SystemUiSettings.java b/src/com/android/settings/cyanogenmod/SystemUiSettings.java
index aea45c0..39acd65 100644
--- a/src/com/android/settings/cyanogenmod/SystemUiSettings.java
+++ b/src/com/android/settings/cyanogenmod/SystemUiSettings.java
@@ -97,7 +97,6 @@ public class SystemUiSettings extends SettingsPreferenceFragment  implements
             // Hide navigation bar category on devices without navigation bar
             if (!hasNavBar) {
                 prefScreen.removePreference(findPreference(CATEGORY_NAVBAR));
-                mPieControl = null;
             }
         } catch (RemoteException e) {
             Log.e(TAG, "Error getting navigation bar status");
